#!/bin/bash

function is_git_dir()
{
  status_result=$(git status &>/dev/null; echo $?)
  if [ $status_result -eq 0 -o $status_result -eq 1 ]; then
    echo "true"
  else
    echo "false"
  fi
}

function is_git_dirty()
{
  local git_status=$(git diff-index --name-only HEAD 2>/dev/null)
  if [ -z "$git_status" ]; then
    echo "false"
  else
    echo "true"
  fi
}

function git_branch_name()
{
  local branch_name=$(git name-rev --name-only HEAD 2>/dev/null)
  echo $branch_name
}

function git_dirty_display()
{
  local is_dirty=$(is_git_dirty)
  if [ "$is_dirty" = "true" ]; then
    echo "${TERM_RED}⊛${TERM_WHITE}"
  else
    echo "⃘"
  fi
}

function git_info()
{
  if [ $(is_git_dir) = "true" ]; then
    local dirty=$(git_dirty_display)
    local branch=$(git_branch_name)
    
    echo "${dirty} ${TERM_BLACK}$branch${TERM_WHITE}"
  else
    echo ""
  fi
}

echo $(git_info)



